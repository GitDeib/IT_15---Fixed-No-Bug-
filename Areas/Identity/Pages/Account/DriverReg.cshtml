@page
@model IT15_Project.Areas.Identity.Pages.Account.DriverRegModel

<div class="container-fluid py-5 animate-fade-in-up delay-1 bg-image">
    <div class="row align-items-center justify-content-center">
        <div class="col-lg-8 animate-fade-in">
            <form asp-page-handler="RegisterDriver" method="post" enctype="multipart/form-data" class="border p-4 shadow-sm rounded bg-white">
                <h4 class="text-center mb-4">Become a Driver</h4>
                <div class="row g-3">
                    <!-- First Name -->
                    <div class="col-md-4">
                        <div class="form-floating">
                            <input asp-for="Input.FirstName" class="form-control" placeholder="First Name" required />
                            <label asp-for="Input.FirstName">First Name</label>
                            <span asp-validation-for="Input.FirstName" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Middle Name -->
                    <div class="col-md-4">
                        <div class="form-floating">
                            <input asp-for="Input.MiddleName" class="form-control" placeholder="Middle Name" />
                            <label asp-for="Input.MiddleName">Middle Name (optional)</label>
                        </div>
                    </div>

                    <!-- Last Name -->
                    <div class="col-md-4">
                        <div class="form-floating">
                            <input asp-for="Input.LastName" class="form-control" placeholder="Last Name" required />
                            <label asp-for="Input.LastName">Last Name</label>
                            <span asp-validation-for="Input.LastName" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Phone -->
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="Input.PhoneNumber" class="form-control" placeholder="09123456789" required />
                            <label asp-for="Input.PhoneNumber">Phone Number</label>
                            <span asp-validation-for="Input.PhoneNumber" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Address -->
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="Input.Address" class="form-control" placeholder="you@example.com" required />
                            <label asp-for="Input.Address">Address</label>
                            <span asp-validation-for="Input.Address" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Email -->
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="Input.Email" class="form-control" placeholder="you@example.com" required />
                            <label asp-for="Input.Email">Email</label>
                            <span asp-validation-for="Input.Email" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Profile Photo -->
                    <div class="col-md-6">
                        <label class="form-label">Profile Photo (optional)</label>
                        <input asp-for="Input.ProfilePhoto" type="file" class="form-control" />
                    </div>

                    <!-- Password -->
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="Input.Password" class="form-control" type="password" placeholder="Password" autocomplete="new-password" required />
                            <label asp-for="Input.Password">Password</label>
                            <span asp-validation-for="Input.Password" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Confirm Password -->
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="Input.ConfirmPassword" class="form-control" type="password" placeholder="Confirm Password" autocomplete="new-password" required />
                            <label asp-for="Input.ConfirmPassword">Confirm Password</label>
                            <span asp-validation-for="Input.ConfirmPassword" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Vehicle Type -->
                    <div class="col-md-6">
                        <div class="form-floating">
                            <select asp-for="Input.VehicleType" class="form-select" id="vehicleSelect" required>
                                <option selected disabled>Select Vehicle Type</option>
                                <option value="car">Car</option>
                                <option value="motor">Motorcycle</option>
                            </select>
                            <label asp-for="Input.VehicleType">Vehicle Type</label>
                            <span asp-validation-for="Input.VehicleType" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Vehicle Seat Type -->
                    <div class="col-md-6" id="vehicleSeatDiv">
                        <div class="form-floating">
                            <select asp-for="Input.VehicleSeat" class="form-select" id="vehicleType" disabled>
                                <option selected disabled>Select a Seat Type</option>
                                <option>4-seater</option>
                                <option>6-seater</option>
                            </select>
                            <label asp-for="Input.VehicleSeat">Vehicle Seat</label>
                        </div>
                    </div>

                    <!-- Vehicle Model -->
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="Input.VehicleModel" class="form-control" placeholder="e.g. Toyota Vios" required />
                            <label asp-for="Input.VehicleModel">Vehicle Model</label>
                            <span asp-validation-for="Input.VehicleModel" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Plate Number -->
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input asp-for="Input.PlateNumber" class="form-control" placeholder="e.g. ABC-1234" required />
                            <label asp-for="Input.PlateNumber">Plate Number</label>
                            <span asp-validation-for="Input.PlateNumber" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- File Uploads -->
                    <div class="col-md-6">
                        <label>Driver's License</label>
                        <input asp-for="Input.DriverLicense" type="file" class="form-control" />
                        <span asp-validation-for="Input.DriverLicense" class="text-danger"></span>
                    </div>
                    <div class="col-md-6">
                        <label>CR (Certificate of Registration)</label>
                        <input asp-for="Input.CertificateRegistration" type="file" class="form-control" />
                        <span asp-validation-for="Input.CertificateRegistration" class="text-danger"></span>
                    </div>
                    <div class="col-md-6">
                        <label>OR (Official Receipt)</label>
                        <input asp-for="Input.OfficialReceipt" type="file" class="form-control" />
                        <span asp-validation-for="Input.OfficialReceipt" class="text-danger"></span>
                    </div>
                    <div class="col-md-6">
                        <label>NBI Clearance</label>
                        <input asp-for="Input.NBIClearance" type="file" class="form-control" />
                        <span asp-validation-for="Input.NBIClearance" class="text-danger"></span>
                    </div>

                    <!-- Motivation -->
                    <div class="col-12">
                        <label asp-for="Input.Motivation" class="form-label">Why do you want to drive with us?</label>
                        <textarea asp-for="Input.Motivation" class="form-control" rows="3" placeholder="Tell us briefly..." required></textarea>
                        <span asp-validation-for="Input.Motivation" class="text-danger"></span>
                    </div>

                    <!-- Terms and Conditions -->
                    <input type="hidden" asp-for="Input.Status" />

                    <!-- Terms and Conditions -->
                    <div class="col-12">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="termsCheck" required>
                            <label class="form-check-label" for="termsCheck">
                                <p>
                                    I have read and agree to the
                                    <a href="#" data-bs-toggle="modal" data-bs-target="#termsandconModal">Terms and Conditions</a>.
                                </p>
                            </label>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="col-12 text-center">
                        <button type="submit" class="btn btn-dark hover-dark btn-lg mt-3 px-5" id="submitBtn" disabled>
                            Submit Application
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>


<div class="modal fade" id="termsandconModal" tabindex="-1" aria-labelledby="termsandcon" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-dark text-white">
                <h5 class="modal-title" id="chooseOptionModalLabel">Terms and Conditions</h5>
            </div>

            <div class="modal-body">
                <div class="container">
                    <div class="modal-body">
                        <h6>1. Introduction</h6>
                        <p>By applying to become a driver on our platform, you agree to abide by the following terms and conditions. Please read them carefully. If you do not agree with any part of these terms, do not proceed with your application.</p>

                        <h6>2. Eligibility</h6>
                        <ul>
                            <li>Be at least 21 years of age.</li>
                            <li>Hold a valid driver's license.</li>
                            <li>Own or have access to a roadworthy vehicle with a valid registration.</li>
                            <li>Have a clean driving record, with no major violations or accidents in the past three years.</li>
                            <li>Comply with all local driving laws and regulations.</li>
                        </ul>

                        <h6>3. Vehicle Requirements</h6>
                        <ul>
                            <li>Be in good working condition and regularly maintained.</li>
                            <li>Be registered and insured as required by law.</li>
                            <li>Have a clean and safe interior for passengers.</li>
                            <li>Be free of any illegal modifications or equipment that might pose a risk to passengers.</li>
                        </ul>

                        <h6>4. Driver's License and Insurance</h6>
                        <p>You are required to have a valid and up-to-date driver’s license, along with the necessary insurance coverage for both yourself and your passengers. You are also required to provide proof of these documents during the registration process and upon request.</p>

                        <h6>5. Behavior and Conduct</h6>
                        <p>As a driver, you agree to:</p>
                        <ul>
                            <li>Treat all passengers with respect and professionalism.</li>
                            <li>Maintain a clean and respectful environment in your vehicle.</li>
                            <li>Abide by traffic laws and regulations at all times.</li>
                            <li>Ensure the safety and well-being of your passengers throughout their ride.</li>
                        </ul>

                        <h6>6. Platform Use</h6>
                        <p>You agree to use the platform solely for its intended purpose and in accordance with the laws of your jurisdiction. Misuse of the platform, including but not limited to fraud, harassment, and unsafe driving, may result in suspension or termination of your account.</p>

                        <h6>7. Payment and Fees</h6>
                        <p>You will receive compensation for completed rides as per the agreed-upon rates set by the platform. The platform reserves the right to deduct service fees or other applicable charges before payment is made to you. Payments will be made on a regular basis, as specified in the driver agreement.</p>

                        <h6>8. Background Checks</h6>
                        <p>You authorize the platform to perform background checks, including but not limited to criminal record checks and driving history checks, to verify your eligibility to drive on the platform. Any criminal convictions or driving violations may result in disqualification from the platform.</p>

                        <h6>9. Termination</h6>
                        <p>The platform reserves the right to terminate your account at any time for any reason, including but not limited to:</p>
                        <ul>
                            <li>Failure to comply with these Terms and Conditions.</li>
                            <li>Unsafe driving behavior or violations of traffic laws.</li>
                            <li>Misuse or abuse of the platform.</li>
                            <li>Fraudulent activity or misrepresentation.</li>
                        </ul>

                        <h6>10. Indemnification</h6>
                        <p>You agree to indemnify, defend, and hold harmless the platform, its affiliates, and their respective officers, directors, employees, and agents from and against any claims, damages, losses, or liabilities arising from your use of the platform, including but not limited to personal injury, property damage, or violations of laws.</p>

                        <h6>11. Limitation of Liability</h6>
                        <p>The platform is not responsible for any direct, indirect, incidental, special, or consequential damages, or loss of profits, arising from the use of the platform or from any interaction between you and passengers, except where prohibited by law.</p>

                        <h6>12. Privacy and Data Security</h6>
                        <p>By becoming a driver, you consent to the collection, storage, and use of your personal data in accordance with the platform’s Privacy Policy. Your data will be used for the purpose of facilitating rides, processing payments, and ensuring safety and security on the platform.</p>

                        <h6>13. Changes to Terms</h6>
                        <p>The platform reserves the right to modify or update these Terms and Conditions at any time. Any changes will be communicated to you, and continued use of the platform will signify your acceptance of the updated terms.</p>

                        <h6>14. Governing Law</h6>
                        <p>These Terms and Conditions will be governed by and construed in accordance with the laws of the jurisdiction in which the platform operates.</p>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-dark" data-bs-dismiss="modal">I Accept</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!---Modal Notification-->
<div class="modal fade" id="notificationModal" tabindex="-1" aria-labelledby="notificationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title" id="notificationModalLabel">Application Submitted</h5>
            </div>
            <div class="modal-body">
                <p>Thank you for applying as a driver! Our team will review your application.</p>
                <p>You will be notified via your contact number or email once your application is approved.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success" data-bs-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const checkbox = document.getElementById('termsCheck');
        const submitBtn = document.getElementById('submitBtn');

        checkbox.addEventListener('change', function () {
            submitBtn.disabled = !this.checked;
        });
    });
</script>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        var vehicleSelect = document.getElementById("vehicleSelect");  // Vehicle type selector
        var vehicleSeatInput = document.getElementById("vehicleType"); // Vehicle seat dropdown

        function toggleVehicleSeat() {
            // If "Car" is selected, enable the vehicle seat dropdown
            if (vehicleSelect.value.toLowerCase() === "car") {
                vehicleSeatInput.disabled = false;
            } else {
                vehicleSeatInput.disabled = true;
                vehicleSeatInput.value = ""; // Reset the value if "Motorcycle" or other vehicle is selected
            }
        }

        // Run the function initially to set the correct state
        toggleVehicleSeat();

        // Add event listener to detect changes in vehicle type selection
        if (vehicleSelect && vehicleSeatInput) {
            vehicleSelect.addEventListener("change", toggleVehicleSeat);
        }
    });
</script>


